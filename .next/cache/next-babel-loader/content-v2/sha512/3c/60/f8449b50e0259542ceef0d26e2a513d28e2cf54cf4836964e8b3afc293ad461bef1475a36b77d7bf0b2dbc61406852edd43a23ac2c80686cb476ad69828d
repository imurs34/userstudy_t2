{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Content.jsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport shortid from \"shortid\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport React, { useCallback, useEffect, useReducer, useRef } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { useAtom } from \"jotai\";\nimport { useState } from \"react\";\nimport InnerVideo from \"./InnerVideo\";\nimport RndVideo from \"./RndVideo\";\nimport Text from \"./Text\";\nimport Image, { FixedImage } from \"./Image\";\nimport { activityAtom, lockAtom, withFrameAtom } from \"../atom\";\nimport useOnClickOutside from \"../hooks/onClickOutside\";\nvar ChunkedData = /*#__PURE__*/React.memo(_c = function _c(_ref) {\n  var data = _ref.data,\n      addFixedData = _ref.addFixedData,\n      index = _ref.index,\n      sourcePath = _ref.sourcePath,\n      isFull = _ref.isFull;\n\n  var sortedData = _.orderBy(data, \"order\");\n\n  return /*#__PURE__*/_jsxDEV(InnerColumn, {\n    children: sortedData.map(function (obj) {\n      if (obj.label === \"text_box\") {\n        return /*#__PURE__*/_jsxDEV(Text, {\n          obj: obj,\n          addFixedData: addFixedData,\n          isFull: isFull\n        }, shortid.generate(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 28\n        }, _this);\n      } else if (obj.label === \"video\") {\n        return /*#__PURE__*/_jsxDEV(InnerVideo, _defineProperty({\n          url: \"\".concat(sourcePath).concat(obj.path),\n          addFixedData: addFixedData,\n          startTime: obj.start_time,\n          endTime: obj.end_time,\n          index: index\n        }, \"index\", index), shortid.generate(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 25\n        }, _this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(Image, {\n          url: \"\".concat(sourcePath).concat(obj.path),\n          addFixedData: addFixedData\n        }, shortid.generate(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 28\n        }, _this);\n      }\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, _this);\n});\n_c2 = ChunkedData;\nvar PositionedData = /*#__PURE__*/React.memo(_c3 = function _c3(_ref2) {\n  var data = _ref2.data,\n      addFixedData = _ref2.addFixedData,\n      index = _ref2.index,\n      sourcePath = _ref2.sourcePath,\n      isFull = _ref2.isFull,\n      template = _ref2.template;\n\n  var _data$box_info_origin = _slicedToArray(data.box_info_original, 4),\n      x = _data$box_info_origin[0],\n      y = _data$box_info_origin[1],\n      width = _data$box_info_origin[2],\n      height = _data$box_info_origin[3];\n\n  var startXRatio = x / template.width * 100;\n  var startYRatio = y / template.height * 100;\n  var widthRatio = width / template.width * 100;\n  var heightRatio = height / template.height * 100;\n\n  if (data.label === \"text_box\") {\n    return /*#__PURE__*/_jsxDEV(PositionedDataContainer, {\n      x: startXRatio,\n      y: startYRatio,\n      width: widthRatio,\n      height: heightRatio,\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        obj: data,\n        addFixedData: addFixedData,\n        isFull: isFull\n      }, shortid.generate(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, _this);\n  }\n\n  if (data.label === \"video\") {\n    return /*#__PURE__*/_jsxDEV(PositionedDataContainer, {\n      x: startXRatio,\n      y: startYRatio,\n      width: widthRatio,\n      height: heightRatio,\n      children: /*#__PURE__*/_jsxDEV(InnerVideo, _defineProperty({\n        url: \"\".concat(sourcePath).concat(obj.path),\n        addFixedData: addFixedData,\n        startTime: obj.start_time,\n        endTime: obj.end_time,\n        index: index\n      }, \"index\", index), shortid.generate(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, _this);\n  }\n\n  if (data.label === \"title\") {\n    return /*#__PURE__*/_jsxDEV(PositionedDataContainer, {\n      x: startXRatio,\n      y: startYRatio,\n      width: widthRatio,\n      height: heightRatio,\n      children: /*#__PURE__*/_jsxDEV(FixedImage, {\n        url: \"\".concat(sourcePath).concat(data.path)\n      }, shortid.generate(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(PositionedDataContainer, {\n    x: startXRatio,\n    y: startYRatio,\n    width: widthRatio,\n    height: heightRatio,\n    children: /*#__PURE__*/_jsxDEV(Image, {\n      url: \"\".concat(sourcePath).concat(data.path),\n      addFixedData: addFixedData\n    }, shortid.generate(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, _this);\n});\n_c4 = PositionedData;\nvar PositionedDataContainer = styled.div.withConfig({\n  displayName: \"Content__PositionedDataContainer\",\n  componentId: \"sc-164klk-0\"\n})([\"width:\", \"%;height:\", \"%;top:\", \"%;left:\", \"%;position:absolute;display:flex;\"], function (props) {\n  return props.width;\n}, function (props) {\n  return props.height;\n}, function (props) {\n  return props.y;\n}, function (props) {\n  return props.x;\n});\n_c5 = PositionedDataContainer;\n\nvar checkOnlyData = function checkOnlyData(prev, next) {\n  return prev.data === next.data && prev.isFull === next.isFull;\n};\n\nvar MemoedChunkedData = /*#__PURE__*/React.memo(ChunkedData, checkOnlyData);\n_c6 = MemoedChunkedData;\nvar MemoedPositionedData = /*#__PURE__*/React.memo(PositionedData, checkOnlyData);\n_c7 = MemoedPositionedData;\n\nvar FixedElement = function FixedElement(_ref3) {\n  _s();\n\n  var data = _ref3.data,\n      clicked = _ref3.clicked,\n      keyValue = _ref3.keyValue,\n      isactive = _ref3.isactive;\n\n  var _useState = useState({\n    x: data.x,\n    y: data.y,\n    width: data.width,\n    height: data.height\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(false),\n      visiable = _useState2[0],\n      setVisiable = _useState2[1];\n\n  var _useFitText = useFitText({\n    maxFontSize: 1000,\n    resolution: 1,\n    minFontSize: 1,\n    onStart: function onStart() {\n      setVisiable(false);\n    },\n    onFinish: function onFinish() {\n      setVisiable(true);\n    }\n  }),\n      fontSize = _useFitText.fontSize,\n      ref = _useFitText.ref,\n      onStart = _useFitText.onStart,\n      onFinish = _useFitText.onFinish;\n\n  var _useAtom = useAtom(lockAtom),\n      _useAtom2 = _slicedToArray(_useAtom, 1),\n      lock = _useAtom2[0];\n\n  var run = function run() {\n    clicked(keyValue);\n  };\n\n  var clear = function clear() {\n    clicked(\"\");\n  };\n\n  var nodeRef = useRef(null);\n\n  var _useState3 = useState(true),\n      onActive = _useState3[0],\n      setOnActive = _useState3[1];\n\n  if (data.label === \"IMG\") {\n    useOnClickOutside(nodeRef, function () {\n      return setOnActive(false);\n    });\n    return /*#__PURE__*/_jsxDEV(CustomRnd, {\n      colored: onActive,\n      enableResizing: !lock,\n      disableDragging: lock,\n      onDragStart: run,\n      onResizeStart: run,\n      bounds: \".frame\",\n      isactive: isactive,\n      size: {\n        width: state.width,\n        height: state.height,\n        background: \"red\"\n      },\n      position: {\n        x: state.x,\n        y: state.y\n      },\n      onDragStop: function onDragStop(e, d) {\n        setOnActive(true);\n        setState(_objectSpread(_objectSpread({}, state), {}, {\n          x: d.x,\n          y: d.y\n        }));\n      },\n      style: data.style,\n      onResizeStop: function onResizeStop(e, direction, ref, delta, position) {\n        setOnActive(true);\n        setState(_objectSpread({\n          width: ref.style.width,\n          height: ref.style.height\n        }, position));\n      },\n      children: /*#__PURE__*/_jsxDEV(RndImg, {\n        src: data.src,\n        draggable: \"false\",\n        ref: nodeRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, _this);\n  }\n\n  if (data.label === \"VIDEO\") {\n    useOnClickOutside(nodeRef, function () {\n      return setOnActive(false);\n    });\n    return /*#__PURE__*/_jsxDEV(CustomRnd, {\n      enableResizing: !lock,\n      disableDragging: lock,\n      onDragStart: run,\n      onResizeStart: run,\n      bounds: \".frame\",\n      isactive: isactive,\n      size: {\n        width: state.width,\n        height: state.height,\n        background: \"red\"\n      },\n      position: {\n        x: state.x,\n        y: state.y\n      },\n      onDragStop: function onDragStop(e, d) {\n        setOnActive(true);\n        setState(_objectSpread(_objectSpread({}, state), {}, {\n          x: d.x,\n          y: d.y\n        }));\n      },\n      style: data.style,\n      onResizeStop: function onResizeStop(e, direction, ref, delta, position) {\n        setOnActive(true);\n        setState(_objectSpread({\n          width: ref.style.width,\n          height: ref.style.height\n        }, position));\n      },\n      children: /*#__PURE__*/_jsxDEV(RndVideo, {\n        url: data.src,\n        startTime: data.startTime,\n        ref: nodeRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, _this);\n  }\n\n  if (data.label === \"P\") {\n    useOnClickOutside(ref, function () {\n      return setOnActive(false);\n    });\n    return /*#__PURE__*/_jsxDEV(CustomRnd, {\n      colored: onActive,\n      enableResizing: !lock,\n      disableDragging: lock,\n      onDragStart: run,\n      onResizeStart: run,\n      bounds: \".frame\",\n      isactive: isactive,\n      size: {\n        width: state.width,\n        height: state.height,\n        background: \"red\"\n      },\n      position: {\n        x: state.x,\n        y: state.y\n      },\n      onDragStop: function onDragStop(e, d) {\n        setOnActive(true);\n        setState(_objectSpread(_objectSpread({}, state), {}, {\n          x: d.x,\n          y: d.y\n        }));\n      },\n      style: data.style,\n      onResizeStop: function onResizeStop(e, direction, ref, delta, position) {\n        setOnActive(true);\n        setState(_objectSpread({\n          width: ref.style.width,\n          height: ref.style.height\n        }, position));\n      },\n      children: /*#__PURE__*/_jsxDEV(PCon, {\n        ref: ref,\n        style: {\n          fontSize: fontSize\n        },\n        lineHeight: data.style.lineHeight,\n        font: data.style[\"font-family\"],\n        weight: data.style[\"font-weight\"],\n        visiable: visiable,\n        children: data.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, _this);\n  }\n};\n\n_s(FixedElement, \"Lj69YMvQVzOGvgCvkvbnKs9IECg=\", false, function () {\n  return [useFitText, useAtom, useOnClickOutside, useOnClickOutside, useOnClickOutside];\n});\n\n_c8 = FixedElement;\nvar Clear = styled.button.withConfig({\n  displayName: \"Content__Clear\",\n  componentId: \"sc-164klk-1\"\n})([\"position:absolute;right:0;top:-20px;@media only screen and (max-width:900px){display:none;}\"]);\n\nfunction Content(_ref4) {\n  _s2();\n\n  var _this2 = this;\n\n  var data = _ref4.data,\n      index = _ref4.index,\n      sourcePath = _ref4.sourcePath,\n      frameInfo = _ref4.frameInfo,\n      isFull = _ref4.isFull,\n      template = _ref4.template,\n      disableControl = _ref4.disableControl;\n\n  var chunkedData = _.groupBy(data.learning_material, \"in_column\");\n\n  var _useAtom3 = useAtom(activityAtom),\n      _useAtom4 = _slicedToArray(_useAtom3, 1),\n      activity = _useAtom4[0];\n\n  var _useAtom5 = useAtom(withFrameAtom),\n      _useAtom6 = _slicedToArray(_useAtom5, 1),\n      withFrame = _useAtom6[0];\n\n  var _useState4 = useState(false),\n      isactive = _useState4[0],\n      setIsActive = _useState4[1];\n\n  useEffect(function () {\n    setIsActive(activity.slide === index);\n  }, [activity.slide]);\n\n  var _useState5 = useState({\n    chunkedData: chunkedData,\n    column: data.column\n  }),\n      state = _useState5[0];\n\n  var _useState6 = useState({}),\n      fixedData = _useState6[0],\n      setFixedData = _useState6[1];\n\n  var addFixedData = useCallback(function (data) {\n    var newKey = shortid.generate();\n    setFixedData(function (prevState) {\n      setNodeEl(newKey);\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, newKey, _objectSpread({}, data)));\n    });\n  });\n\n  var titleObj = _.find(data.learning_material, function (o) {\n    return o.label === \"title\";\n  });\n\n  var _useState7 = useState(),\n      nodeEl = _useState7[0],\n      setNodeEl = _useState7[1];\n\n  var clicked = function clicked(key) {\n    setNodeEl(key);\n  };\n\n  var frameRatio = template.width / template.height;\n\n  if (data.column === 0) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        isactive: isactive,\n        children: [/*#__PURE__*/_jsxDEV(Inner, {\n          bg: \"\".concat(sourcePath).concat(data.bg_image),\n          disableControl: disableControl,\n          children: [frameInfo.topBg && /*#__PURE__*/_jsxDEV(Frame, {\n            src: frameInfo.sourcePath + frameInfo.topBg,\n            height: frameInfo.topHeight,\n            isactive: withFrame\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(PositionedContainer, {\n            children: /*#__PURE__*/_jsxDEV(PositionedCanvas, {\n              ratio: frameRatio,\n              children: _.chain(state.chunkedData).values().flatten().value().map(function (obj, index) {\n                return /*#__PURE__*/_jsxDEV(MemoedPositionedData, {\n                  data: obj,\n                  template: template,\n                  addFixedData: addFixedData,\n                  index: index,\n                  sourcePath: sourcePath,\n                  isFull: isFull\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 44\n                }, _this2);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Frame, {\n            src: frameInfo.sourcePath + frameInfo.bottomBg,\n            height: frameInfo.bottomHeight,\n            isactive: withFrame\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), Object.entries(fixedData).map(function (value) {\n          return /*#__PURE__*/_jsxDEV(FixedElement, {\n            data: value[1],\n            clicked: clicked,\n            isactive: nodeEl === value[0],\n            keyValue: value[0]\n          }, value[0], false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 21\n          }, _this2);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      isactive: isactive,\n      children: [/*#__PURE__*/_jsxDEV(Inner, {\n        bg: \"\".concat(sourcePath).concat(data.bg_image),\n        disableControl: disableControl,\n        children: [frameInfo.topBG && /*#__PURE__*/_jsxDEV(Frame, {\n          src: frameInfo.sourcePath + frameInfo.topBg,\n          height: frameInfo.topHeight,\n          isactive: withFrame\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 37\n        }, this), titleObj && /*#__PURE__*/_jsxDEV(TitleContainer, {\n          children: /*#__PURE__*/_jsxDEV(TitleImg, {\n            src: \"\".concat(sourcePath).concat(titleObj.path)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ColumnContainer, {\n          children: _.times(state.column, function (i) {\n            return /*#__PURE__*/_jsxDEV(MemoedChunkedData, {\n              data: state.chunkedData[i + 1],\n              addFixedData: addFixedData,\n              index: index,\n              sourcePath: sourcePath,\n              isFull: isFull\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 32\n            }, _this2);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 17\n        }, this), frameInfo.bottomBg && /*#__PURE__*/_jsxDEV(Frame, {\n          src: frameInfo.sourcePath + frameInfo.bottomBg,\n          height: frameInfo.bottomHeight,\n          isactive: withFrame\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 13\n      }, this), Object.entries(fixedData).map(function (value) {\n        return /*#__PURE__*/_jsxDEV(FixedElement, {\n          data: value[1],\n          clicked: clicked,\n          isactive: nodeEl === value[0],\n          keyValue: value[0]\n        }, value[0], false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, _this2);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s2(Content, \"nL0EY1Bo8LPlsafukSwfCALDCWc=\", false, function () {\n  return [useAtom, useAtom];\n});\n\n_c9 = Content;\nvar Frame = styled.img.withConfig({\n  displayName: \"Content__Frame\",\n  componentId: \"sc-164klk-2\"\n})([\"flex-basis:\", \"%;object-fit:fill;display:\", \";\"], function (props) {\n  return props.height;\n}, function (props) {\n  return props.isactive ? \"block\" : \"none\";\n});\n_c10 = Frame;\nvar Inner = styled.div.withConfig({\n  displayName: \"Content__Inner\",\n  componentId: \"sc-164klk-3\"\n})([\"padding-top:16px;background-repeat:no-repeat;background-size:100% 100%;background-image:\", \";display:flex;flex-direction:column;flex:1;align-items:stretch;\", \"\"], function (props) {\n  return props.bg ? \"url(\".concat(props.bg, \")\") : \"none\";\n}, function (props) {\n  return props.disableControl && css([\"margin-left:100px;margin-right:100px;outline:1px solid gray;\"]);\n});\n_c11 = Inner;\nvar PositionedCanvas = styled.div.withConfig({\n  displayName: \"Content__PositionedCanvas\",\n  componentId: \"sc-164klk-4\"\n})([\"--current-height:calc(100vh - 50px);width:calc(var(--current-height) * \", \");height:100%;margin:0 auto;position:relative;\"], function (props) {\n  return props.ratio;\n});\n_c12 = PositionedCanvas;\nvar PositionedContainer = styled.div.withConfig({\n  displayName: \"Content__PositionedContainer\",\n  componentId: \"sc-164klk-5\"\n})([\"display:flex;flex:1;\"]);\n_c13 = PositionedContainer;\nvar ColumnContainer = styled.div.withConfig({\n  displayName: \"Content__ColumnContainer\",\n  componentId: \"sc-164klk-6\"\n})([\"flex:1;display:flex;\"]);\n_c14 = ColumnContainer;\nvar TitleImg = styled.img.withConfig({\n  displayName: \"Content__TitleImg\",\n  componentId: \"sc-164klk-7\"\n})([\"width:100%;height:100%;object-fit:contain;object-position:left top;\"]);\n_c15 = TitleImg;\nvar TitleContainer = styled.div.withConfig({\n  displayName: \"Content__TitleContainer\",\n  componentId: \"sc-164klk-8\"\n})([\"height:10%;width:100%;padding:0 20px 0 !important;@media only screen and (max-width:900px){height:20px;}\"]);\n_c16 = TitleContainer;\nvar PCon = styled.div.withConfig({\n  displayName: \"Content__PCon\",\n  componentId: \"sc-164klk-9\"\n})([\"width:100%;height:100%;line-height:\", \";font-weight:\", \";letter-spacing:0;white-space:pre-wrap;font-family:\", \";visibility:\", \";box-sizing:border-box;padding:0.5px;\"], function (props) {\n  return \"\".concat(props.lineHeight, \"%\");\n}, function (props) {\n  return props.weight;\n}, function (props) {\n  return props.font;\n}, function (props) {\n  return props.visiable ? \"visible\" : \"hidden\";\n});\n_c17 = PCon;\nvar CustomRnd = styled(Rnd).withConfig({\n  displayName: \"Content__CustomRnd\",\n  componentId: \"sc-164klk-10\"\n})([\"box-sizing:border-box;\", \";\"], function (props) {\n  return props.colored && css([\"z-index:10;outline:1px solid #a9ceeb;box-shadow:0px 1px 2px 2px #a9ceeb;\"]);\n});\n_c18 = CustomRnd;\nvar RndImg = styled.img.withConfig({\n  displayName: \"Content__RndImg\",\n  componentId: \"sc-164klk-11\"\n})([\"width:inherit;height:inherit;\"]);\n_c19 = RndImg;\nvar InnerColumn = styled.div.withConfig({\n  displayName: \"Content__InnerColumn\",\n  componentId: \"sc-164klk-12\"\n})([\"flex:1;display:flex;flex-direction:column;padding:10px;\"]);\n_c20 = InnerColumn;\nvar Container = styled.div.withConfig({\n  displayName: \"Content__Container\",\n  componentId: \"sc-164klk-13\"\n})([\"display:\", \";flex:1;align-items:stretch;\", \";\"], function (props) {\n  return props.isactive ? \"flex\" : \"none\";\n}, function (props) {\n  return props.disableControl && css([\"\"]);\n});\n_c21 = Container;\nexport default _c22 = /*#__PURE__*/React.memo(Content);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22;\n\n$RefreshReg$(_c, \"ChunkedData$React.memo\");\n$RefreshReg$(_c2, \"ChunkedData\");\n$RefreshReg$(_c3, \"PositionedData$React.memo\");\n$RefreshReg$(_c4, \"PositionedData\");\n$RefreshReg$(_c5, \"PositionedDataContainer\");\n$RefreshReg$(_c6, \"MemoedChunkedData\");\n$RefreshReg$(_c7, \"MemoedPositionedData\");\n$RefreshReg$(_c8, \"FixedElement\");\n$RefreshReg$(_c9, \"Content\");\n$RefreshReg$(_c10, \"Frame\");\n$RefreshReg$(_c11, \"Inner\");\n$RefreshReg$(_c12, \"PositionedCanvas\");\n$RefreshReg$(_c13, \"PositionedContainer\");\n$RefreshReg$(_c14, \"ColumnContainer\");\n$RefreshReg$(_c15, \"TitleImg\");\n$RefreshReg$(_c16, \"TitleContainer\");\n$RefreshReg$(_c17, \"PCon\");\n$RefreshReg$(_c18, \"CustomRnd\");\n$RefreshReg$(_c19, \"RndImg\");\n$RefreshReg$(_c20, \"InnerColumn\");\n$RefreshReg$(_c21, \"Container\");\n$RefreshReg$(_c22, \"%default%\");","map":{"version":3,"sources":["/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Content.jsx"],"names":["shortid","toStyle","useFitText","React","useCallback","useEffect","useReducer","useRef","styled","css","Rnd","useAtom","useState","InnerVideo","RndVideo","Text","Image","FixedImage","activityAtom","lockAtom","withFrameAtom","useOnClickOutside","ChunkedData","memo","data","addFixedData","index","sourcePath","isFull","sortedData","_","orderBy","map","obj","label","generate","path","start_time","end_time","PositionedData","template","box_info_original","x","y","width","height","startXRatio","startYRatio","widthRatio","heightRatio","PositionedDataContainer","div","props","checkOnlyData","prev","next","MemoedChunkedData","MemoedPositionedData","FixedElement","clicked","keyValue","isactive","state","setState","visiable","setVisiable","maxFontSize","resolution","minFontSize","onStart","onFinish","fontSize","ref","lock","run","clear","nodeRef","onActive","setOnActive","background","e","d","style","direction","delta","position","src","startTime","lineHeight","text","Clear","button","Content","frameInfo","disableControl","chunkedData","groupBy","learning_material","activity","withFrame","setIsActive","slide","column","fixedData","setFixedData","newKey","prevState","setNodeEl","titleObj","find","o","nodeEl","key","frameRatio","bg_image","topBg","topHeight","chain","values","flatten","value","bottomBg","bottomHeight","Object","entries","topBG","times","i","Frame","img","Inner","bg","PositionedCanvas","ratio","PositionedContainer","ColumnContainer","TitleImg","TitleContainer","PCon","weight","font","CustomRnd","colored","RndImg","InnerColumn","Container"],"mappings":"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","sourcesContent":["import shortid from \"shortid\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport React, { useCallback, useEffect, useReducer, useRef } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { useAtom } from \"jotai\";\nimport { useState } from \"react\";\n\nimport InnerVideo from \"./InnerVideo\";\nimport RndVideo from \"./RndVideo\";\nimport Text from \"./Text\";\nimport Image, { FixedImage } from \"./Image\";\nimport { activityAtom, lockAtom, withFrameAtom } from \"../atom\";\nimport useOnClickOutside from \"../hooks/onClickOutside\";\n\nconst ChunkedData = React.memo(({ data, addFixedData, index, sourcePath, isFull }) => {\n    const sortedData = _.orderBy(data, \"order\");\n    return (\n        <InnerColumn>\n            {sortedData.map((obj) => {\n                if (obj.label === \"text_box\") {\n                    return <Text obj={obj} addFixedData={addFixedData} key={shortid.generate()} isFull={isFull} />;\n                } else if (obj.label === \"video\") {\n                    return (\n                        <InnerVideo\n                            url={`${sourcePath}${obj.path}`}\n                            addFixedData={addFixedData}\n                            startTime={obj.start_time}\n                            endTime={obj.end_time}\n                            index={index}\n                            key={shortid.generate()}\n                            index={index}\n                        />\n                    );\n                } else {\n                    return <Image url={`${sourcePath}${obj.path}`} addFixedData={addFixedData} key={shortid.generate()} />;\n                }\n            })}\n        </InnerColumn>\n    );\n});\nconst PositionedData = React.memo(({ data, addFixedData, index, sourcePath, isFull, template }) => {\n    const [x, y, width, height] = data.box_info_original;\n    const startXRatio = (x / template.width) * 100;\n    const startYRatio = (y / template.height) * 100;\n    const widthRatio = (width / template.width) * 100;\n    const heightRatio = (height / template.height) * 100;\n    if (data.label === \"text_box\") {\n        return (\n            <PositionedDataContainer x={startXRatio} y={startYRatio} width={widthRatio} height={heightRatio}>\n                <Text obj={data} addFixedData={addFixedData} key={shortid.generate()} isFull={isFull} />\n            </PositionedDataContainer>\n        );\n    }\n    if (data.label === \"video\") {\n        return (\n            <PositionedDataContainer x={startXRatio} y={startYRatio} width={widthRatio} height={heightRatio}>\n                <InnerVideo url={`${sourcePath}${obj.path}`} addFixedData={addFixedData} startTime={obj.start_time} endTime={obj.end_time} index={index} key={shortid.generate()} index={index} />\n            </PositionedDataContainer>\n        );\n    }\n    if (data.label === \"title\") {\n        return (\n            <PositionedDataContainer x={startXRatio} y={startYRatio} width={widthRatio} height={heightRatio}>\n                <FixedImage url={`${sourcePath}${data.path}`} key={shortid.generate()} />\n            </PositionedDataContainer>\n        );\n    }\n\n    return (\n        <PositionedDataContainer x={startXRatio} y={startYRatio} width={widthRatio} height={heightRatio}>\n            <Image url={`${sourcePath}${data.path}`} addFixedData={addFixedData} key={shortid.generate()} />\n        </PositionedDataContainer>\n    );\n});\nconst PositionedDataContainer = styled.div`\n    width: ${(props) => props.width}%;\n    height: ${(props) => props.height}%;\n    top: ${(props) => props.y}%;\n    left: ${(props) => props.x}%;\n    position: absolute;\n    display: flex;\n`;\n\nconst checkOnlyData = (prev, next) => {\n    return prev.data === next.data && prev.isFull === next.isFull;\n};\n\nconst MemoedChunkedData = React.memo(ChunkedData, checkOnlyData);\nconst MemoedPositionedData = React.memo(PositionedData, checkOnlyData);\n\nconst FixedElement = ({ data, clicked, keyValue, isactive }) => {\n    const [state, setState] = useState({ x: data.x, y: data.y, width: data.width, height: data.height });\n    const [visiable, setVisiable] = useState(false);\n    const { fontSize, ref, onStart, onFinish } = useFitText({\n        maxFontSize: 1000,\n        resolution: 1,\n        minFontSize: 1,\n        onStart: () => {\n            setVisiable(false);\n        },\n        onFinish: () => {\n            setVisiable(true);\n        },\n    });\n    const [lock] = useAtom(lockAtom);\n    const run = () => {\n        clicked(keyValue);\n    };\n    const clear = () => {\n        clicked(\"\");\n    };\n    const nodeRef = useRef(null)\n    const [onActive, setOnActive] = useState(true)\n\n\n\n    if (data.label === \"IMG\") {\n        useOnClickOutside(nodeRef, () => setOnActive(false));\n        return (\n            <CustomRnd\n                colored={onActive}\n                enableResizing={!lock}\n                disableDragging={lock}\n                onDragStart={run}\n                onResizeStart={run}\n                bounds={\".frame\"}\n                isactive={isactive}\n                size={{ width: state.width, height: state.height, background: \"red\" }}\n                position={{ x: state.x, y: state.y }}\n                onDragStop={(e, d) => {\n                    setOnActive(true)\n                    setState({ ...state, x: d.x, y: d.y });\n                }}\n                style={data.style}\n                onResizeStop={(e, direction, ref, delta, position) => {\n                    setOnActive(true)\n                    setState({\n                        width: ref.style.width,\n                        height: ref.style.height,\n                        ...position,\n                    });\n                }}\n            >\n                <RndImg src={data.src} draggable=\"false\" ref={nodeRef}/>\n                {/* {isactive && <Clear onClick={clear}>confirm</Clear>} */}\n            </CustomRnd>\n        );\n    }\n    if (data.label === \"VIDEO\") {\n        useOnClickOutside(nodeRef, () => setOnActive(false));\n        return (\n            <CustomRnd\n                enableResizing={!lock}\n                disableDragging={lock}\n                onDragStart={run}\n                onResizeStart={run}\n                bounds={\".frame\"}\n                isactive={isactive}\n                size={{ width: state.width, height: state.height, background: \"red\" }}\n                position={{ x: state.x, y: state.y }}\n                onDragStop={(e, d) => {\n                    setOnActive(true)\n                    setState({ ...state, x: d.x, y: d.y });\n                }}\n                style={data.style}\n                onResizeStop={(e, direction, ref, delta, position) => {\n\n                    setOnActive(true)\n                    setState({\n                        width: ref.style.width,\n                        height: ref.style.height,\n                        ...position,\n                    });\n                }}\n            >\n                <RndVideo url={data.src} startTime={data.startTime} ref={nodeRef}/>\n                {/* {isactive && <Clear onClick={clear}>confirm</Clear>} */}\n            </CustomRnd>\n        );\n    }\n    if (data.label === \"P\") {\n        useOnClickOutside(ref, () => setOnActive(false));\n        return (\n            <CustomRnd\n                colored={onActive}\n                enableResizing={!lock}\n                disableDragging={lock}\n                onDragStart={run}\n                onResizeStart={run}\n                bounds={\".frame\"}\n                isactive={isactive}\n                size={{ width: state.width, height: state.height, background: \"red\" }}\n                position={{ x: state.x, y: state.y }}\n                onDragStop={(e, d) => {\n                    setOnActive(true)\n                    setState({ ...state, x: d.x, y: d.y });\n                }}\n                style={data.style}\n                onResizeStop={(e, direction, ref, delta, position) => {\n                    setOnActive(true)\n                    setState({\n                        width: ref.style.width,\n                        height: ref.style.height,\n                        ...position,\n                    });\n                }}\n            >\n                <PCon ref={ref} style={{ fontSize }} lineHeight={data.style.lineHeight} font={data.style[\"font-family\"]} weight={data.style[\"font-weight\"]} visiable={visiable} >\n                    {data.text}\n                </PCon>\n                {/* {isactive && <Clear onClick={clear}>confirm</Clear>} */}\n            </CustomRnd>\n        );\n    }\n};\nconst Clear = styled.button`\n    position: absolute;\n    right: 0;\n    top: -20px;\n    @media only screen and (max-width: 900px) {\n        display: none;\n    }\n`;\n\nfunction Content({ data, index, sourcePath, frameInfo, isFull, template, disableControl }) {\n    const chunkedData = _.groupBy(data.learning_material, \"in_column\");\n    const [activity] = useAtom(activityAtom);\n    const [withFrame] = useAtom(withFrameAtom);\n    const [isactive, setIsActive] = useState(false);\n    useEffect(() => {\n        setIsActive(activity.slide === index);\n    }, [activity.slide]);\n    const [state] = useState({ chunkedData, column: data.column });\n    const [fixedData, setFixedData] = useState({});\n    const addFixedData = useCallback((data) => {\n        const newKey = shortid.generate();\n        setFixedData((prevState) => {\n            setNodeEl(newKey);\n            return { ...prevState, [newKey]: { ...data } };\n        });\n    });\n\n    const titleObj = _.find(data.learning_material, (o) => o.label === \"title\");\n    const [nodeEl, setNodeEl] = useState();\n    const clicked = (key) => {\n        setNodeEl(key);\n    };\n    const frameRatio = template.width / template.height;\n    if (data.column === 0) {\n        return (\n            <>\n        <Container isactive={isactive} >\n            <Inner bg={`${sourcePath}${data.bg_image}`} disableControl={disableControl}>\n                    {frameInfo.topBg && <Frame src={frameInfo.sourcePath + frameInfo.topBg} height={frameInfo.topHeight} isactive={withFrame} />}\n                    {/* {titleObj && (\n                        <TitleContainer>\n                            <TitleImg src={`${sourcePath}${titleObj.path}`} />\n                        </TitleContainer>\n                    )} */}\n                    <PositionedContainer>\n                        <PositionedCanvas ratio={frameRatio}>\n                            {_.chain(state.chunkedData)\n                                .values()\n                                .flatten()\n                                .value()\n                                .map((obj, index) => {\n                                    return <MemoedPositionedData data={obj} key={index} template={template} addFixedData={addFixedData} index={index} sourcePath={sourcePath} isFull={isFull} />;\n                                })}\n                        </PositionedCanvas>\n                    </PositionedContainer>\n                    <Frame src={frameInfo.sourcePath + frameInfo.bottomBg} height={frameInfo.bottomHeight} isactive={withFrame} />\n                </Inner>\n                {Object.entries(fixedData).map((value) => (\n                    <FixedElement data={value[1]} key={value[0]} clicked={clicked} isactive={nodeEl === value[0]} keyValue={value[0]} />\n                ))}\n            </Container>\n                </>\n        );\n    }\n    return (\n        <>\n        <Container isactive={isactive} >\n            <Inner bg={`${sourcePath}${data.bg_image}`} disableControl={disableControl}>\n                {frameInfo.topBG && <Frame src={frameInfo.sourcePath + frameInfo.topBg} height={frameInfo.topHeight} isactive={withFrame} />}\n                {titleObj && (\n                    <TitleContainer>\n                        <TitleImg src={`${sourcePath}${titleObj.path}`} />\n                    </TitleContainer>\n                )}\n                <ColumnContainer>\n                    {_.times(state.column, (i) => {\n                        return <MemoedChunkedData data={state.chunkedData[i + 1]} key={i} addFixedData={addFixedData} index={index} sourcePath={sourcePath} isFull={isFull} />;\n                    })}\n                </ColumnContainer>\n                {frameInfo.bottomBg && <Frame src={frameInfo.sourcePath + frameInfo.bottomBg} height={frameInfo.bottomHeight} isactive={withFrame} />}\n            </Inner>\n        {Object.entries(fixedData).map((value) => (\n            <FixedElement data={value[1]} key={value[0]} clicked={clicked} isactive={nodeEl === value[0]} keyValue={value[0]} />\n        ))}\n        </Container>\n        </>\n    );\n}\nconst Frame = styled.img`\n    flex-basis: ${(props) => props.height}%;\n    object-fit: fill;\n    display: ${(props) => (props.isactive ? \"block\" : \"none\")};\n`;\n\nconst Inner = styled.div`\n    padding-top: 16px;\n    background-repeat: no-repeat;\n    background-size: 100% 100%;\n    background-image: ${(props) => (props.bg ? `url(${props.bg})` : \"none\")};\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    align-items: stretch;\n    ${(props)=> props.disableControl && css`\n            margin-left:100px;\n            margin-right:100px;\n            outline: 1px solid gray;\n        `\n    }\n`;\n\nconst PositionedCanvas = styled.div`\n    --current-height: calc(100vh - 50px);\n    width: calc(var(--current-height) * ${(props) => props.ratio});\n    height: 100%;\n    margin: 0 auto;\n    position: relative;\n`;\n\nconst PositionedContainer = styled.div`\n    display: flex;\n    flex: 1;\n`;\nconst ColumnContainer = styled.div`\n    flex: 1;\n    display: flex;\n`;\nconst TitleImg = styled.img`\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    object-position: left top;\n`;\nconst TitleContainer = styled.div`\n    height: 10%;\n    width: 100%;\n    padding: 0 20px 0 !important;\n    @media only screen and (max-width: 900px) {\n        height: 20px;\n    }\n`;\nconst PCon = styled.div`\n    width: 100%;\n    height: 100%;\n    line-height: ${(props) => `${props.lineHeight}%`};\n    font-weight: ${(props) => props.weight};\n    letter-spacing: 0;\n    white-space: pre-wrap;\n    font-family: ${(props) => props.font};\n    visibility: ${(props) => (props.visiable ? \"visible\" : \"hidden\")};\n    box-sizing: border-box;\n    padding: 0.5px;\n`;\nconst CustomRnd = styled(Rnd)`\n    box-sizing: border-box;\n    ${(props) =>\n        props.colored &&\n        css`\n            z-index: 10;\n            outline: 1px solid #a9ceeb;\n            box-shadow: 0px 1px 2px 2px #a9ceeb;\n        `};\n`;\nconst RndImg = styled.img`\n    width: inherit;\n    height: inherit;\n`;\nconst InnerColumn = styled.div`\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n`;\n\nconst Container = styled.div`\n    display: ${(props) => (props.isactive ? \"flex\" : \"none\")};\n    flex: 1;\n    align-items: stretch;\n    ${(props) =>\n        props.disableControl &&\n        css`\n        `};\n`;\n\nexport default React.memo(Content);\n"]},"metadata":{},"sourceType":"module"}
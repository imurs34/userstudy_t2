{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Text.jsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _ from \"lodash\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useWindowHeight from \"../hooks/windowHeight\";\nimport { INSTRUCTURE_VALUE, MOBILE_VALUE, TEMPLATE_VALUE } from \"../store\";\nimport { LINE_HEIGHT } from \"../store\";\nimport { darkModeAtom, frameHeightAtom, lockAtom, withFrameAtom } from \"../atom\";\nvar useBreakpoint = createBreakpoint({\n  XL: 1280,\n  L: 768,\n  S: 350\n});\n\nfunction Text(_ref) {\n  _s();\n\n  var obj = _ref.obj,\n      addFixedData = _ref.addFixedData,\n      isFull = _ref.isFull;\n\n  var _useAtom = useAtom(lockAtom),\n      _useAtom2 = _slicedToArray(_useAtom, 1),\n      lock = _useAtom2[0];\n\n  var _useAtom3 = useAtom(withFrameAtom),\n      _useAtom4 = _slicedToArray(_useAtom3, 1),\n      withFrame = _useAtom4[0];\n\n  var _useState = useState(),\n      fixed = _useState[0],\n      setFixed = _useState[1];\n\n  var breakpoint = useBreakpoint();\n  var height = useWindowHeight();\n  var ref = useRef();\n\n  var onClick = function onClick(e) {\n    if (lock) {\n      return;\n    }\n\n    setFixed(true);\n\n    var _e$currentTarget$getB = e.currentTarget.getBoundingClientRect(),\n        top = _e$currentTarget$getB.top,\n        right = _e$currentTarget$getB.right,\n        bottom = _e$currentTarget$getB.bottom,\n        left = _e$currentTarget$getB.left,\n        width = _e$currentTarget$getB.width,\n        height = _e$currentTarget$getB.height,\n        x = _e$currentTarget$getB.x,\n        y = _e$currentTarget$getB.y;\n\n    addFixedData({\n      label: \"P\",\n      text: obj.text_content,\n      src: e.target.src,\n      style: _objectSpread(_objectSpread({}, _.pick(window.getComputedStyle(e.currentTarget), [\"font-size\", \"padding\", \"color\", \"background-color\", \"letter-spacing\", \"font-weight\", \"font-family\"])), {}, {\n        lineHeight: goal.lineHeight\n      }),\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height,\n      x: x,\n      y: y\n    });\n  }; // const { fontSize, ref } = useFitText({ maxFontSize: parseInt(goal), resolution: 5 });\n\n\n  var _useAtom5 = useAtom(darkModeAtom),\n      _useAtom6 = _slicedToArray(_useAtom5, 1),\n      dark = _useAtom6[0];\n\n  var _useAtom7 = useAtom(frameHeightAtom),\n      _useAtom8 = _slicedToArray(_useAtom7, 1),\n      frameHeight = _useAtom8[0];\n\n  var _useState2 = useState({\n    fontSize: 15,\n    lineHeight: 150\n  }),\n      goal = _useState2[0],\n      setGoal = _useState2[1];\n\n  useEffect(function () {\n    var size = obj.avail_font_size * (isFull ? INSTRUCTURE_VALUE : 1) * (withFrame ? TEMPLATE_VALUE : 1) * 16;\n\n    if (frameHeight && height && [\"S\", \"L\"].includes(breakpoint)) {\n      size *= (height - 80) / frameHeight * MOBILE_VALUE;\n      setGoal({\n        fontSize: size,\n        lineHeight: LINE_HEIGHT\n      });\n    } else {\n      setGoal({\n        fontSize: size,\n        lineHeight: LINE_HEIGHT\n      });\n    }\n  }, [frameHeight, height, isFull, withFrame]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fixed: fixed,\n    isDark: dark,\n    children: /*#__PURE__*/_jsxDEV(P, {\n      goal: goal,\n      onClick: onClick,\n      bg: obj.color_bg,\n      color: obj.color_font,\n      typeFace: obj.typeface,\n      ref: ref,\n      children: obj.text_content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Text, \"XXLrMeXj0bZus3RFGHpks/SLX7w=\", false, function () {\n  return [useAtom, useAtom, useBreakpoint, useWindowHeight, useAtom, useAtom];\n});\n\n_c = Text;\nvar P = styled.p.withConfig({\n  displayName: \"Text__P\",\n  componentId: \"aigxym-0\"\n})([\"font-size:\", \"px;width:100%;line-height:\", \"%;letter-spacing:0;color:\", \";background-color:\", \";font-family:\", \";\"], function (props) {\n  return props.goal.fontSize;\n}, function (props) {\n  return props.goal.lineHeight;\n}, function (props) {\n  return props.color ? \"rgb\".concat(props.color) : \"black\";\n}, function (props) {\n  return props.bg ? \"rgb\".concat(props.bg) : \"black\";\n}, function (props) {\n  return props.typeFace;\n});\n_c2 = P;\nvar Container = styled.div.withConfig({\n  displayName: \"Text__Container\",\n  componentId: \"aigxym-1\"\n})([\"flex:1;flex-basis:0;cursor:pointer;min-height:20px;background-color:white;box-sizing:border-box;visibility:\", \";background-color:\", \";\"], function (props) {\n  return props.fixed ? \"hidden\" : \"visible\";\n}, function (props) {\n  return props.isDark ? \"rgb(47, 48, 49)\" : \"white\";\n});\n_c3 = Container;\nexport default Text;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Text\");\n$RefreshReg$(_c2, \"P\");\n$RefreshReg$(_c3, \"Container\");","map":{"version":3,"sources":["/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Text.jsx"],"names":["_","toStyle","useFitText","styled","css","Rnd","createBreakpoint","useAtom","useEffect","useRef","useState","useWindowHeight","INSTRUCTURE_VALUE","MOBILE_VALUE","TEMPLATE_VALUE","LINE_HEIGHT","darkModeAtom","frameHeightAtom","lockAtom","withFrameAtom","useBreakpoint","XL","L","S","Text","obj","addFixedData","isFull","lock","withFrame","fixed","setFixed","breakpoint","height","ref","onClick","e","currentTarget","getBoundingClientRect","top","right","bottom","left","width","x","y","label","text","text_content","src","target","style","pick","window","getComputedStyle","lineHeight","goal","dark","frameHeight","fontSize","setGoal","size","avail_font_size","includes","color_bg","color_font","typeface","P","p","props","color","bg","typeFace","Container","div","isDark"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\n\nimport useWindowHeight from \"../hooks/windowHeight\";\nimport { INSTRUCTURE_VALUE, MOBILE_VALUE, TEMPLATE_VALUE } from \"../store\";\nimport { LINE_HEIGHT } from \"../store\";\nimport { darkModeAtom, frameHeightAtom, lockAtom, withFrameAtom } from \"../atom\";\n\nconst useBreakpoint = createBreakpoint({ XL: 1280, L: 768, S: 350 });\n\nfunction Text({ obj, addFixedData, isFull }) {\n    const [lock] = useAtom(lockAtom);\n    const [withFrame] = useAtom(withFrameAtom);\n    const [fixed, setFixed] = useState();\n    const breakpoint = useBreakpoint();\n    const height = useWindowHeight();\n    const ref = useRef();\n    const onClick = (e) => {\n        if (lock) {\n            return;\n        }\n        setFixed(true);\n        const { top, right, bottom, left, width, height, x, y } = e.currentTarget.getBoundingClientRect();\n        addFixedData({\n            label: \"P\",\n            text: obj.text_content,\n            src: e.target.src,\n            style: {\n                ..._.pick(window.getComputedStyle(e.currentTarget), [\"font-size\", \"padding\", \"color\", \"background-color\", \"letter-spacing\", \"font-weight\", \"font-family\"]),\n                lineHeight: goal.lineHeight,\n            },\n            top,\n            right,\n            bottom,\n            left,\n            width,\n            height,\n            x,\n            y,\n        });\n    };\n    // const { fontSize, ref } = useFitText({ maxFontSize: parseInt(goal), resolution: 5 });\n    const [dark] = useAtom(darkModeAtom);\n    const [frameHeight] = useAtom(frameHeightAtom);\n\n    const [goal, setGoal] = useState({ fontSize: 15, lineHeight: 150 });\n    useEffect(() => {\n        let size = obj.avail_font_size * (isFull ? INSTRUCTURE_VALUE : 1) * (withFrame ? TEMPLATE_VALUE : 1) * 16;\n        if (frameHeight && height && [\"S\", \"L\"].includes(breakpoint)) {\n            size *= ((height - 80) / frameHeight) * MOBILE_VALUE;\n            setGoal({ fontSize: size, lineHeight: LINE_HEIGHT });\n        } else {\n            setGoal({ fontSize: size, lineHeight: LINE_HEIGHT });\n        }\n    }, [frameHeight, height, isFull, withFrame]);\n\n    return (\n        <Container fixed={fixed} isDark={dark}>\n            {/* <Font ref={ref} style={{ fontSize }} color={obj.color_font} bg={obj.color_bg} onClick={onClick}>\n                {obj.text_content}\n            </Font> */}\n            <P goal={goal} onClick={onClick} bg={obj.color_bg} color={obj.color_font} typeFace={obj.typeface} ref={ref}>\n                {obj.text_content}\n            </P>\n        </Container>\n    );\n}\n\nconst P = styled.p`\n    font-size: ${(props) => props.goal.fontSize}px;\n    width: 100%;\n    line-height: ${(props) => props.goal.lineHeight}%;\n    letter-spacing: 0;\n    color: ${(props) => (props.color ? `rgb${props.color}` : \"black\")};\n    background-color: ${(props) => (props.bg ? `rgb${props.bg}` : \"black\")};\n    font-family: ${(props) => props.typeFace};\n`;\n\nconst Container = styled.div`\n    flex: 1;\n    flex-basis: 0;\n    cursor: pointer;\n    min-height: 20px;\n    background-color: white;\n    box-sizing: border-box;\n    visibility: ${(props) => (props.fixed ? \"hidden\" : \"visible\")};\n    background-color: ${(props) => (props.isDark ? \"rgb(47, 48, 49)\" : \"white\")};\n`;\n\nexport default Text;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Text.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport _ from \"lodash\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useWindowHeight from \"../hooks/windowHeight\";\nimport { INSTRUCTURE_VALUE, MOBILE_VALUE, TEMPLATE_VALUE } from \"../store\";\nimport { LINE_HEIGHT } from \"../store\";\nimport { darkModeAtom, frameHeightAtom, lockAtom, withFrameAtom } from \"../atom\";\nconst useBreakpoint = createBreakpoint({\n  XL: 1280,\n  L: 768,\n  S: 350\n});\n\nfunction Text({\n  obj,\n  addFixedData,\n  isFull\n}) {\n  const [lock] = useAtom(lockAtom);\n  const [withFrame] = useAtom(withFrameAtom);\n  const {\n    0: fixed,\n    1: setFixed\n  } = useState();\n  const breakpoint = useBreakpoint();\n  const height = useWindowHeight();\n  const ref = useRef();\n\n  const onClick = e => {\n    if (lock) {\n      return;\n    }\n\n    setFixed(true);\n    const {\n      top,\n      right,\n      bottom,\n      left,\n      width,\n      height,\n      x,\n      y\n    } = e.currentTarget.getBoundingClientRect();\n    addFixedData({\n      label: \"P\",\n      text: obj.text_content,\n      src: e.target.src,\n      style: _objectSpread(_objectSpread({}, _.pick(window.getComputedStyle(e.currentTarget), [\"font-size\", \"padding\", \"color\", \"background-color\", \"letter-spacing\", \"font-weight\", \"font-family\"])), {}, {\n        lineHeight: goal.lineHeight\n      }),\n      top,\n      right,\n      bottom,\n      left,\n      width,\n      height,\n      x,\n      y\n    });\n  }; // const { fontSize, ref } = useFitText({ maxFontSize: parseInt(goal), resolution: 5 });\n\n\n  const [dark] = useAtom(darkModeAtom);\n  const [frameHeight] = useAtom(frameHeightAtom);\n  const {\n    0: goal,\n    1: setGoal\n  } = useState({\n    fontSize: 15,\n    lineHeight: 150\n  });\n  useEffect(() => {\n    let size = obj.avail_font_size * (isFull ? INSTRUCTURE_VALUE : 1) * (withFrame ? TEMPLATE_VALUE : 1) * 16;\n\n    if (frameHeight && height && [\"S\", \"L\"].includes(breakpoint)) {\n      size *= (height - 80) / frameHeight * MOBILE_VALUE;\n      setGoal({\n        fontSize: size,\n        lineHeight: LINE_HEIGHT\n      });\n    } else {\n      setGoal({\n        fontSize: size,\n        lineHeight: LINE_HEIGHT\n      });\n    }\n  }, [frameHeight, height, isFull, withFrame]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fixed: fixed,\n    isDark: dark,\n    children: /*#__PURE__*/_jsxDEV(P, {\n      goal: goal,\n      onClick: onClick,\n      bg: obj.color_bg,\n      color: obj.color_font,\n      typeFace: obj.typeface,\n      ref: ref,\n      children: obj.text_content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n\nconst P = styled.p.withConfig({\n  displayName: \"Text__P\",\n  componentId: \"aigxym-0\"\n})([\"font-size:\", \"px;width:100%;line-height:\", \"%;letter-spacing:0;color:\", \";background-color:\", \";font-family:\", \";\"], props => props.goal.fontSize, props => props.goal.lineHeight, props => props.color ? `rgb${props.color}` : \"black\", props => props.bg ? `rgb${props.bg}` : \"black\", props => props.typeFace);\nconst Container = styled.div.withConfig({\n  displayName: \"Text__Container\",\n  componentId: \"aigxym-1\"\n})([\"flex:1;flex-basis:0;cursor:pointer;min-height:20px;background-color:white;box-sizing:border-box;visibility:\", \";background-color:\", \";\"], props => props.fixed ? \"hidden\" : \"visible\", props => props.isDark ? \"rgb(47, 48, 49)\" : \"white\");\nexport default Text;","map":{"version":3,"sources":["/Users/jeongyeon/Desktop/lecture_segmentation/web_dev/code/userstudy_t2/components/Text.jsx"],"names":["_","toStyle","useFitText","styled","css","Rnd","createBreakpoint","useAtom","useEffect","useRef","useState","useWindowHeight","INSTRUCTURE_VALUE","MOBILE_VALUE","TEMPLATE_VALUE","LINE_HEIGHT","darkModeAtom","frameHeightAtom","lockAtom","withFrameAtom","useBreakpoint","XL","L","S","Text","obj","addFixedData","isFull","lock","withFrame","fixed","setFixed","breakpoint","height","ref","onClick","e","top","right","bottom","left","width","x","y","currentTarget","getBoundingClientRect","label","text","text_content","src","target","style","pick","window","getComputedStyle","lineHeight","goal","dark","frameHeight","setGoal","fontSize","size","avail_font_size","includes","color_bg","color_font","typeface","P","p","props","color","bg","typeFace","Container","div","isDark"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\nimport toStyle from \"css-to-style\";\nimport useFitText from \"use-fit-text\";\nimport styled, { css } from \"styled-components\";\nimport { Rnd } from \"react-rnd\";\nimport { createBreakpoint } from \"react-use\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef, useState } from \"react\";\n\nimport useWindowHeight from \"../hooks/windowHeight\";\nimport { INSTRUCTURE_VALUE, MOBILE_VALUE, TEMPLATE_VALUE } from \"../store\";\nimport { LINE_HEIGHT } from \"../store\";\nimport { darkModeAtom, frameHeightAtom, lockAtom, withFrameAtom } from \"../atom\";\n\nconst useBreakpoint = createBreakpoint({ XL: 1280, L: 768, S: 350 });\n\nfunction Text({ obj, addFixedData, isFull }) {\n    const [lock] = useAtom(lockAtom);\n    const [withFrame] = useAtom(withFrameAtom);\n    const [fixed, setFixed] = useState();\n    const breakpoint = useBreakpoint();\n    const height = useWindowHeight();\n    const ref = useRef();\n    const onClick = (e) => {\n        if (lock) {\n            return;\n        }\n        setFixed(true);\n        const { top, right, bottom, left, width, height, x, y } = e.currentTarget.getBoundingClientRect();\n        addFixedData({\n            label: \"P\",\n            text: obj.text_content,\n            src: e.target.src,\n            style: {\n                ..._.pick(window.getComputedStyle(e.currentTarget), [\"font-size\", \"padding\", \"color\", \"background-color\", \"letter-spacing\", \"font-weight\", \"font-family\"]),\n                lineHeight: goal.lineHeight,\n            },\n            top,\n            right,\n            bottom,\n            left,\n            width,\n            height,\n            x,\n            y,\n        });\n    };\n    // const { fontSize, ref } = useFitText({ maxFontSize: parseInt(goal), resolution: 5 });\n    const [dark] = useAtom(darkModeAtom);\n    const [frameHeight] = useAtom(frameHeightAtom);\n\n    const [goal, setGoal] = useState({ fontSize: 15, lineHeight: 150 });\n    useEffect(() => {\n        let size = obj.avail_font_size * (isFull ? INSTRUCTURE_VALUE : 1) * (withFrame ? TEMPLATE_VALUE : 1) * 16;\n        if (frameHeight && height && [\"S\", \"L\"].includes(breakpoint)) {\n            size *= ((height - 80) / frameHeight) * MOBILE_VALUE;\n            setGoal({ fontSize: size, lineHeight: LINE_HEIGHT });\n        } else {\n            setGoal({ fontSize: size, lineHeight: LINE_HEIGHT });\n        }\n    }, [frameHeight, height, isFull, withFrame]);\n\n    return (\n        <Container fixed={fixed} isDark={dark}>\n            {/* <Font ref={ref} style={{ fontSize }} color={obj.color_font} bg={obj.color_bg} onClick={onClick}>\n                {obj.text_content}\n            </Font> */}\n            <P goal={goal} onClick={onClick} bg={obj.color_bg} color={obj.color_font} typeFace={obj.typeface} ref={ref}>\n                {obj.text_content}\n            </P>\n        </Container>\n    );\n}\n\nconst P = styled.p`\n    font-size: ${(props) => props.goal.fontSize}px;\n    width: 100%;\n    line-height: ${(props) => props.goal.lineHeight}%;\n    letter-spacing: 0;\n    color: ${(props) => (props.color ? `rgb${props.color}` : \"black\")};\n    background-color: ${(props) => (props.bg ? `rgb${props.bg}` : \"black\")};\n    font-family: ${(props) => props.typeFace};\n`;\n\nconst Container = styled.div`\n    flex: 1;\n    flex-basis: 0;\n    cursor: pointer;\n    min-height: 20px;\n    background-color: white;\n    box-sizing: border-box;\n    visibility: ${(props) => (props.fixed ? \"hidden\" : \"visible\")};\n    background-color: ${(props) => (props.isDark ? \"rgb(47, 48, 49)\" : \"white\")};\n`;\n\nexport default Text;\n"]},"metadata":{},"sourceType":"module"}